/*! For license information please see 406.js.LICENSE.txt */
"use strict";(self.webpackChunkmulti_step_form_builder=self.webpackChunkmulti_step_form_builder||[]).push([[406],{406(t,e,r){r.d(e,{default:()=>O});var n=r(594),o=r(470),i=r(842),s=r.n(i),a=r(214),u=r(848);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t){return function(t){if(Array.isArray(t))return j(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||w(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach(function(e){p(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function p(t,e,r){return(e=function(t){var e=function(t){if("object"!=c(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==c(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof a?n:a,c=Object.create(u.prototype);return v(c,"_invoke",function(r,n,o){var i,a,u,c=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,r){return i=e,a=0,u=t,d.n=r,s}};function p(r,n){for(a=r,u=n,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],p=d.p,m=i[2];r>3?(o=m===n)&&(u=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=r<2&&p<i[1])?(a=0,d.v=n,d.n=i[1]):p<m&&(o=r<3||i[0]>n||n>m)&&(i[4]=r,i[5]=n,d.n=m,a=0))}if(o||r>1)return s;throw f=!0,n}return function(o,l,m){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,m),a=l,u=m;(e=a<2?t:u)||!f;){i||(a?a<3?(a>1&&(d.n=-1),p(a,u)):d.n=u:d.v=u);try{if(c=2,i){if(a||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,a<2&&(a=0)}else 1===a&&(e=i.return)&&e.call(i),a<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((e=(f=d.n<0)?u:r.call(n,d))!==s)break}catch(e){i=t,a=1,u=e}finally{c=1}}return{value:e,done:f}}}(r,o,i),!0),c}var s={};function a(){}function u(){}function c(){}e=Object.getPrototypeOf;var l=[][n]?e(e([][n]())):(v(e={},n,function(){return this}),e),f=c.prototype=a.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,v(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=c,v(f,"constructor",c),v(c,"constructor",u),u.displayName="GeneratorFunction",v(c,o,"GeneratorFunction"),v(f),v(f,o,"Generator"),v(f,n,function(){return this}),v(f,"toString",function(){return"[object Generator]"}),(m=function(){return{w:i,m:d}})()}function v(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}v=function(t,e,r,n){function i(e,r){v(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},v(t,e,r,n)}function b(t,e,r,n,o,i,s){try{var a=t[i](s),u=a.value}catch(t){return void r(t)}a.done?e(u):Promise.resolve(u).then(n,o)}function y(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function s(t){b(i,n,o,s,a,"next",t)}function a(t){b(i,n,o,s,a,"throw",t)}s(void 0)})}}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,s,a=[],u=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(t,e)||w(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(t,e){if(t){if("string"==typeof t)return j(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(t,e):void 0}}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var g=(0,n.lazy)(function(){return r.e(980).then(r.bind(r,980))}),_=(0,n.lazy)(function(){return r.e(484).then(r.bind(r,484))}),S=(0,n.lazy)(function(){return r.e(280).then(r.bind(r,280))});const O=function(){var t,e=h((0,n.useState)(null),2),r=e[0],i=e[1],c=h((0,n.useState)(!0),2),f=c[0],p=c[1],v=h((0,n.useState)(!1),2),b=v[0],w=v[1],j=h((0,n.useState)(null),2),O=j[0],x=j[1],P=null===(t=window.msfAdmin)||void 0===t?void 0:t.formId,N=(0,n.useRef)(!1),k=(0,n.useRef)(!1);(0,n.useEffect)(function(){T()},[]);var T=function(){var t=y(m().m(function t(){var e,r;return m().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,p(!0),t.n=1,s()({path:"/msf/v1/forms/".concat(P),method:"GET"});case 1:e=t.v,i(e),t.n=3;break;case 2:t.p=2,r=t.v,console.error("Error loading form:",r),x({type:"error",message:(0,o.__)("Failed to load form","multi-step-form-builder")});case 3:return t.p=3,p(!1),t.f(3);case 4:return t.a(2)}},t,null,[[0,2,3,4]])}));return function(){return t.apply(this,arguments)}}(),A=function(){var t=y(m().m(function t(){var e,n;return m().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,w(!0),N.current=!0,t.n=1,s()({path:"/msf/v1/forms/".concat(P),method:"POST",data:r});case 1:null!==(e=window.wp)&&void 0!==e&&null!==(e=e.data)&&void 0!==e&&e.dispatch&&window.wp.data.dispatch("core/editor").savePost(),x({type:"success",message:(0,o.__)("Form saved successfully!","multi-step-form-builder")}),setTimeout(function(){return x(null)},3e3),t.n=3;break;case 2:t.p=2,n=t.v,console.error("Error saving form:",n),x({type:"error",message:(0,o.__)("Failed to save form","multi-step-form-builder")});case 3:return t.p=3,w(!1),N.current=!1,t.f(3);case 4:return t.a(2)}},t,null,[[0,2,3,4]])}));return function(){return t.apply(this,arguments)}}(),E=function(){var t={id:"step_".concat(Date.now()),title:"",description:"",fields:[]};i(d(d({},r),{},{steps:[].concat(l(r.steps||[]),[t])}))},C=function(t,e){var n=l(r.steps),o=h(n.splice(t,1),1)[0];n.splice(e,0,o),i(d(d({},r),{},{steps:n}))},D=function(t){i(d(d({},r),{},{settings:t}))};if((0,n.useEffect)(function(){var t,e;if(null!==(t=window.wp)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.subscribe&&null!==(e=window.wp)&&void 0!==e&&null!==(e=e.data)&&void 0!==e&&e.select){var n=window.wp.data.subscribe(function(){var t,e,n,o,i=null===(t=(e=window.wp.data.select("core/editor")).isSavingPost)||void 0===t?void 0:t.call(e),a=null===(n=(o=window.wp.data.select("core/editor")).isAutosavingPost)||void 0===n?void 0:n.call(o);i&&!a?k.current||(k.current=!0,N.current||s()({path:"/msf/v1/forms/".concat(P),method:"POST",data:r}).catch(function(){})):k.current=!1});return function(){"function"==typeof n&&n()}}},[P,r]),f)return(0,u.jsxs)("div",{className:"msf-loading",children:[(0,u.jsx)(a.Spinner,{}),(0,u.jsx)("p",{children:(0,o.__)("Loading form...","multi-step-form-builder")})]});var F=[{name:"steps",title:(0,o.__)("Steps","multi-step-form-builder"),className:"msf-tab-steps"},{name:"header",title:(0,o.__)("Header","multi-step-form-builder"),className:"msf-tab-header"},{name:"settings",title:(0,o.__)("Settings","multi-step-form-builder"),className:"msf-tab-settings"}];return(0,u.jsxs)("div",{className:"msf-form-builder",children:[O&&(0,u.jsx)(a.Notice,{status:O.type,onRemove:function(){return x(null)},isDismissible:!0,children:O.message}),(0,u.jsx)("div",{className:"msf-builder-header",children:(0,u.jsx)(a.Button,{variant:"primary",onClick:A,isBusy:b,disabled:b,children:b?(0,o.__)("Saving...","multi-step-form-builder"):(0,o.__)("Save Form","multi-step-form-builder")})}),(0,u.jsx)(a.TabPanel,{className:"msf-tabs",activeClass:"is-active",tabs:F,children:function(t){return(0,u.jsx)(n.Suspense,{fallback:(0,u.jsx)("div",{className:"msf-loading-tab",children:(0,u.jsx)(a.Spinner,{})}),children:"header"===t.name?(0,u.jsx)("div",{className:"msf-header-panel",children:(0,u.jsx)(S,{formConfig:r,updateFormConfig:i})}):"steps"===t.name?(0,u.jsxs)("div",{className:"msf-steps-panel",children:[(null===(e=r.steps)||void 0===e?void 0:e.length)>0?r.steps.map(function(t,e){return(0,u.jsxs)("div",{className:"msf-step-wrapper",children:[(0,u.jsxs)("div",{className:"msf-step-controls",children:[(0,u.jsxs)("span",{className:"msf-step-number",children:[(0,o.__)("Step","multi-step-form-builder")," ",e+1]}),(0,u.jsxs)("div",{className:"msf-step-move-buttons",children:[e>0&&(0,u.jsx)(a.Button,{icon:"arrow-up",onClick:function(){return C(e,e-1)},label:(0,o.__)("Move Up","multi-step-form-builder"),isSmall:!0}),e<r.steps.length-1&&(0,u.jsx)(a.Button,{icon:"arrow-down",onClick:function(){return C(e,e+1)},label:(0,o.__)("Move Down","multi-step-form-builder"),isSmall:!0})]})]}),(0,u.jsx)(g,{step:t,stepIndex:e,onUpdate:function(t){return function(t,e){var n=l(r.steps);n[t]=e,i(d(d({},r),{},{steps:n}))}(e,t)},onDelete:function(){return t=e,n=r.steps.filter(function(e,r){return r!==t}),void i(d(d({},r),{},{steps:n}));var t,n}})]},t.id||e)}):(0,u.jsx)("div",{className:"msf-empty-state",children:(0,u.jsx)("p",{children:(0,o.__)("No steps yet. Add your first step to get started.","multi-step-form-builder")})}),(0,u.jsx)(a.Button,{variant:"secondary",onClick:E,className:"msf-add-step-btn",children:(0,o.__)("Add Step","multi-step-form-builder")})]}):"settings"===t.name?(0,u.jsx)(_,{settings:r.settings||{},onUpdate:D,formId:P}):void 0});var e}})]})}}}]);