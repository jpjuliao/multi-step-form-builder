/*! For license information please see 149.js.LICENSE.txt */
"use strict";(self.webpackChunkmulti_step_form_builder=self.webpackChunkmulti_step_form_builder||[]).push([[149],{149(t,e,r){r.d(e,{default:()=>S});var n=r(594),o=r(842),i=r.n(o),s=r(848);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach(function(e){l(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function l(t,e,r){return(e=function(t){var e=function(t){if("object"!=a(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var c=n&&n.prototype instanceof a?n:a,u=Object.create(c.prototype);return m(u,"_invoke",function(r,n,o){var i,a,c,u=0,l=o||[],f=!1,m={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,r){return i=e,a=0,c=t,m.n=r,s}};function p(r,n){for(a=r,c=n,e=0;!f&&u&&!o&&e<l.length;e++){var o,i=l[e],p=m.p,d=i[2];r>3?(o=d===n)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=r<2&&p<i[1])?(a=0,m.v=n,m.n=i[1]):p<d&&(o=r<3||i[0]>n||n>d)&&(i[4]=r,i[5]=n,m.n=d,a=0))}if(o||r>1)return s;throw f=!0,n}return function(o,l,d){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,d),a=l,c=d;(e=a<2?t:c)||!f;){i||(a?a<3?(a>1&&(m.n=-1),p(a,c)):m.n=c:m.v=c);try{if(u=2,i){if(a||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,a<2&&(a=0)}else 1===a&&(e=i.return)&&e.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((e=(f=m.n<0)?c:r.call(n,m))!==s)break}catch(e){i=t,a=1,c=e}finally{u=1}}return{value:e,done:f}}}(r,o,i),!0),u}var s={};function a(){}function c(){}function u(){}e=Object.getPrototypeOf;var l=[][n]?e(e([][n]())):(m(e={},n,function(){return this}),e),p=u.prototype=a.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,m(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return c.prototype=u,m(p,"constructor",u),m(u,"constructor",c),c.displayName="GeneratorFunction",m(u,o,"GeneratorFunction"),m(p),m(p,o,"Generator"),m(p,n,function(){return this}),m(p,"toString",function(){return"[object Generator]"}),(f=function(){return{w:i,m:d}})()}function m(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}m=function(t,e,r,n){function i(e,r){m(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},m(t,e,r,n)}function p(t,e,r,n,o,i,s){try{var a=t[i](s),c=a.value}catch(t){return void r(t)}a.done?e(c):Promise.resolve(c).then(n,o)}function d(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function s(t){p(i,n,o,s,a,"next",t)}function a(t){p(i,n,o,s,a,"throw",t)}s(void 0)})}}function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,s,a=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(t,e)||h(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){if(t){if("string"==typeof t)return y(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(t,e):void 0}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var v=(0,n.lazy)(function(){return r.e(414).then(r.bind(r,33))}),g=(0,n.lazy)(function(){return r.e(304).then(r.bind(r,304))}),j=(0,n.lazy)(function(){return r.e(573).then(r.bind(r,573))}),w=function(){return(0,s.jsx)("div",{className:"msf-spinner"})};const S=function(t){var e,r=t.formId,o=t.onSuccess,a=b((0,n.useState)(null),2),c=a[0],m=a[1],p=b((0,n.useState)(0),2),S=p[0],x=p[1],O=b((0,n.useState)({}),2),P=O[0],T=O[1],N=b((0,n.useState)({}),2),k=N[0],E=N[1],A=b((0,n.useState)(!0),2),_=A[0],C=A[1],D=b((0,n.useState)(!1),2),G=D[0],I=D[1],F=b((0,n.useState)(!1),2),B=F[0],L=F[1],R=b((0,n.useState)(""),2),q=R[0],z=R[1],U=b((0,n.useState)(!1),2),$=U[0],K=U[1],M=(0,n.useRef)(null);(0,n.useEffect)(function(){if(M.current){var t=M.current.querySelector("input, select, textarea");t&&t.focus()}},[S]),(0,n.useEffect)(function(){X()},[r]);var X=function(){var t=d(f().m(function t(){var e,n;return f().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,C(!0),t.n=1,i()({path:"/msf/v1/forms/".concat(r)});case 1:e=t.v,m(e),t.n=3;break;case 2:t.p=2,n=t.v,console.error("Error loading form:",n);case 3:return t.p=3,C(!1),t.f(3);case 4:return t.a(2)}},t,null,[[0,2,3,4]])}));return function(){return t.apply(this,arguments)}}(),H=function(){var t;if(S>=c.steps.length)return!0;var e=c.steps[S],r={};return null===(t=e.fields)||void 0===t||t.forEach(function(t){var e=P[t.name];t.required&&(!e||Array.isArray(e)&&0===e.length)&&(r[t.name]="".concat(t.label," is required")),"email"===t.type&&e&&!J(e)&&(r[t.name]="Please enter a valid email address"),"url"===t.type&&e&&!Q(e)&&(r[t.name]="Please enter a valid URL")}),E(r),0===Object.keys(r).length},J=function(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)},Q=function(t){try{return new URL(t),!0}catch(t){return!1}},V=function(t){t&&t.preventDefault(),console.log("handleNext",S,H()),H()?(x(S+1),E({}),window.scrollTo({top:0,behavior:"smooth"})):window.scrollTo({top:0,behavior:"smooth"})},W=function(){var t=d(f().m(function t(e){var n,s,a;return f().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e.preventDefault(),console.log("handleSubmit",S,H()),H()){t.n=1;break}return window.scrollTo({top:0,behavior:"smooth"}),t.a(2);case 1:return t.p=1,I(!0),t.n=2,i()({path:"/msf/v1/forms/".concat(r,"/submit"),method:"POST",data:P});case 2:n=t.v,z(n.message),L(!0),K(!1),x(c.steps.length),window.scrollTo({top:0,behavior:"smooth"}),o&&setTimeout(function(){return o()},2e3),t.n=4;break;case 3:t.p=3,a=t.v,console.error("Error submitting form:",a),null!==(s=a.data)&&void 0!==s&&s.errors?(E(a.data.errors),z("Please correct the errors and try again.")):z(a.message||"An error occurred while submitting the form. Please try again."),K(!0),x(c.steps.length),window.scrollTo({top:0,behavior:"smooth"});case 4:return t.p=4,I(!1),t.f(4);case 5:return t.a(2)}},t,null,[[1,3,4,5]])}));return function(e){return t.apply(this,arguments)}}();if(_)return(0,s.jsxs)("div",{className:"msf-form-loading",children:[(0,s.jsx)(w,{}),(0,s.jsx)("p",{children:"Loading form..."})]});if(!c||!c.steps||0===c.steps.length)return(0,s.jsx)("p",{children:"Form not found or has no steps."});B&&c.steps.length;var Y,Z=[].concat(function(t){if(Array.isArray(t))return y(t)}(Y=c.steps)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(Y)||h(Y)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[{title:"Finish",description:"",fields:[]}]),tt=c.settings||{},et=S===c.steps.length-1,rt=S===c.steps.length;return(0,s.jsx)("div",{className:"msf-form-wrapper",ref:M,children:(0,s.jsxs)(n.Suspense,{fallback:(0,s.jsxs)("div",{className:"msf-form-loading",children:[(0,s.jsx)(w,{}),(0,s.jsx)("p",{children:"Loading form..."})]}),children:[(0,s.jsx)(j,{formConfig:c}),rt?(0,s.jsx)("div",{className:"msf-step-content",children:(0,s.jsxs)("div",{className:"msf-form-".concat($?"error":"success"),children:[(0,s.jsx)("div",{className:"msf-".concat($?"error":"success","-icon"),children:$?"✕":"✓"}),(0,s.jsxs)("div",{className:"msf-form-message",children:[(0,s.jsx)("h3",{children:$?"Error":"Success!"}),(0,s.jsx)("p",{children:q})]}),$&&Object.keys(k).length>0&&(0,s.jsx)("button",{type:"button",onClick:function(){x(c.steps.length-1),L(!1),K(!1)},className:"msf-btn msf-btn-primary",style:{marginTop:"20px"},children:"Go Back"})]})}):(0,s.jsxs)("form",{onSubmit:W,onKeyDown:function(t){var e=S===c.steps.length-1;"Enter"!==t.key||"TEXTAREA"===t.target.tagName||e||(t.preventDefault(),V())},className:"msf-form",children:[(0,s.jsxs)("div",{className:"msf-step-content",children:[c.steps[S].title&&(0,s.jsx)("h3",{className:"msf-step-title",children:c.steps[S].title}),c.steps[S].description&&(0,s.jsx)("p",{className:"msf-step-description",children:c.steps[S].description}),(0,s.jsx)("div",{className:"msf-fields",children:null===(e=c.steps[S].fields)||void 0===e?void 0:e.map(function(t,e){return(0,s.jsx)(v,{field:t,value:P[t.name],onChange:function(e){return function(t,e){T(u(u({},P),{},l({},t,e))),k[t]&&E(u(u({},k),{},l({},t,null)))}(t.name,e)},error:k[t.name]},t.name||e)})})]}),(0,s.jsxs)("div",{className:"msf-form-navigation",children:[S>0&&(0,s.jsx)("button",{type:"button",onClick:function(){x(S-1),E({}),window.scrollTo({top:0,behavior:"smooth"})},className:"msf-btn msf-btn-secondary",children:tt.previousButtonText||"Previous"}),et?(0,s.jsx)("button",{type:"submit",disabled:G,className:"msf-btn msf-btn-primary",children:G?"Submitting...":tt.submitButtonText||"Submit"}):(0,s.jsx)("button",{type:"button",onClick:V,className:"msf-btn msf-btn-primary",children:tt.nextButtonText||"Next"})]})]}),(0,s.jsx)(g,{currentStep:S,totalSteps:Z.length,steps:Z})]})})}}}]);