/*! For license information please see 674.js.LICENSE.txt */
"use strict";(self.webpackChunkmulti_step_form_builder=self.webpackChunkmulti_step_form_builder||[]).push([[674],{674(t,e,r){r.d(e,{default:()=>x});var n=r(594),o=r(470),i=r(842),s=r.n(i),a=r(214),u=r(562),c=r(848);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function f(t){return function(t){if(Array.isArray(t))return S(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||j(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach(function(e){d(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function d(t,e,r){return(e=function(t){var e=function(t){if("object"!=l(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==l(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function v(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof a?n:a,c=Object.create(u.prototype);return b(c,"_invoke",function(r,n,o){var i,a,u,c=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:m,f:m.bind(t,4),d:function(e,r){return i=e,a=0,u=t,p.n=r,s}};function m(r,n){for(a=r,u=n,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],m=p.p,d=i[2];r>3?(o=d===n)&&(u=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=m&&((o=r<2&&m<i[1])?(a=0,p.v=n,p.n=i[1]):m<d&&(o=r<3||i[0]>n||n>d)&&(i[4]=r,i[5]=n,p.n=d,a=0))}if(o||r>1)return s;throw f=!0,n}return function(o,l,d){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,d),a=l,u=d;(e=a<2?t:u)||!f;){i||(a?a<3?(a>1&&(p.n=-1),m(a,u)):p.n=u:p.v=u);try{if(c=2,i){if(a||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,a<2&&(a=0)}else 1===a&&(e=i.return)&&e.call(i),a<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((e=(f=p.n<0)?u:r.call(n,p))!==s)break}catch(e){i=t,a=1,u=e}finally{c=1}}return{value:e,done:f}}}(r,o,i),!0),c}var s={};function a(){}function u(){}function c(){}e=Object.getPrototypeOf;var l=[][n]?e(e([][n]())):(b(e={},n,function(){return this}),e),f=c.prototype=a.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,b(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=c,b(f,"constructor",c),b(c,"constructor",u),u.displayName="GeneratorFunction",b(c,o,"GeneratorFunction"),b(f),b(f,o,"Generator"),b(f,n,function(){return this}),b(f,"toString",function(){return"[object Generator]"}),(v=function(){return{w:i,m:p}})()}function b(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}b=function(t,e,r,n){function i(e,r){b(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},b(t,e,r,n)}function y(t,e,r,n,o,i,s){try{var a=t[i](s),u=a.value}catch(t){return void r(t)}a.done?e(u):Promise.resolve(u).then(n,o)}function h(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function s(t){y(i,n,o,s,a,"next",t)}function a(t){y(i,n,o,s,a,"throw",t)}s(void 0)})}}function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,s,a=[],u=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(t,e)||j(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,e){if(t){if("string"==typeof t)return S(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(t,e):void 0}}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var _=(0,n.lazy)(function(){return r.e(980).then(r.bind(r,980))}),w=(0,n.lazy)(function(){return r.e(484).then(r.bind(r,484))}),O=(0,n.lazy)(function(){return r.e(280).then(r.bind(r,280))});const x=function(){var t,e=g((0,n.useState)(null),2),r=e[0],i=e[1],l=g((0,n.useState)(!0),2),p=l[0],d=l[1],b=g((0,n.useState)(!1),2),y=b[0],j=b[1],S=g((0,n.useState)(null),2),x=S[0],P=S[1],N=null===(t=window.msfAdmin)||void 0===t?void 0:t.formId;(0,n.useEffect)(function(){k()},[]);var k=function(){var t=h(v().m(function t(){var e,r;return v().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,d(!0),t.n=1,s()({path:"/msf/v1/forms/".concat(N),method:"GET"});case 1:e=t.v,i(e),t.n=3;break;case 2:t.p=2,r=t.v,console.error("Error loading form:",r),P({type:"error",message:(0,o.__)("Failed to load form","multi-step-form-builder")});case 3:return t.p=3,d(!1),t.f(3);case 4:return t.a(2)}},t,null,[[0,2,3,4]])}));return function(){return t.apply(this,arguments)}}(),A=function(){var t=h(v().m(function t(){var e;return v().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,j(!0),t.n=1,s()({path:"/msf/v1/forms/".concat(N),method:"POST",data:r});case 1:C||(P({type:"success",message:(0,o.__)("Form saved successfully!","multi-step-form-builder")}),setTimeout(function(){return P(null)},3e3)),t.n=3;break;case 2:t.p=2,e=t.v,console.error("Error saving form:",e),P({type:"error",message:(0,o.__)("Failed to save form","multi-step-form-builder")});case 3:return t.p=3,j(!1),t.f(3);case 4:return t.a(2)}},t,null,[[0,2,3,4]])}));return function(){return t.apply(this,arguments)}}(),E=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=(0,u.useDispatch)("core/editor").savePost,o=(0,u.useSelect)(function(t){return{isSavingPost:t("core/editor").isSavingPost(),isAutosavingPost:t("core/editor").isAutosavingPost()}}),i=o.isSavingPost,s=o.isAutosavingPost;return(0,n.useEffect)(function(){i&&!s&&e&&t()},[i,s,e,t]),{triggerSave:r,isSavingPost:i}}(A,!y&&r),T=E.triggerSave,C=E.isSavingPost,D=function(){var t={id:"step_".concat(Date.now()),title:"",description:"",fields:[]};i(m(m({},r),{},{steps:[].concat(f(r.steps||[]),[t])}))},F=function(t,e){var n=f(r.steps),o=g(n.splice(t,1),1)[0];n.splice(e,0,o),i(m(m({},r),{},{steps:n}))},I=function(t){i(m(m({},r),{},{settings:t}))};if(p)return(0,c.jsxs)("div",{className:"msf-loading",children:[(0,c.jsx)(a.Spinner,{}),(0,c.jsx)("p",{children:(0,o.__)("Loading form...","multi-step-form-builder")})]});var G=[{name:"steps",title:(0,o.__)("Steps","multi-step-form-builder"),className:"msf-tab-steps"},{name:"header",title:(0,o.__)("Header","multi-step-form-builder"),className:"msf-tab-header"},{name:"settings",title:(0,o.__)("Settings","multi-step-form-builder"),className:"msf-tab-settings"}];return(0,c.jsxs)("div",{className:"msf-form-builder",children:[x&&(0,c.jsx)(a.Notice,{status:x.type,onRemove:function(){return P(null)},isDismissible:!0,children:x.message}),(0,c.jsx)("div",{className:"msf-builder-header",children:(0,c.jsx)(a.Button,{variant:"primary",onClick:function(){T()},isBusy:y,disabled:y,children:y?(0,o.__)("Saving...","multi-step-form-builder"):(0,o.__)("Save Form","multi-step-form-builder")})}),(0,c.jsx)(a.TabPanel,{className:"msf-tabs",activeClass:"is-active",tabs:G,children:function(t){return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)("div",{className:"msf-loading-tab",children:(0,c.jsx)(a.Spinner,{})}),children:"header"===t.name?(0,c.jsx)("div",{className:"msf-header-panel",children:(0,c.jsx)(O,{formConfig:r,updateFormConfig:i})}):"steps"===t.name?(0,c.jsxs)("div",{className:"msf-steps-panel",children:[(null===(e=r.steps)||void 0===e?void 0:e.length)>0?r.steps.map(function(t,e){return(0,c.jsxs)("div",{className:"msf-step-wrapper",children:[(0,c.jsxs)("div",{className:"msf-step-controls",children:[(0,c.jsxs)("span",{className:"msf-step-number",children:[(0,o.__)("Step","multi-step-form-builder")," ",e+1]}),(0,c.jsxs)("div",{className:"msf-step-move-buttons",children:[e>0&&(0,c.jsx)(a.Button,{icon:"arrow-up",onClick:function(){return F(e,e-1)},label:(0,o.__)("Move Up","multi-step-form-builder"),isSmall:!0}),e<r.steps.length-1&&(0,c.jsx)(a.Button,{icon:"arrow-down",onClick:function(){return F(e,e+1)},label:(0,o.__)("Move Down","multi-step-form-builder"),isSmall:!0})]})]}),(0,c.jsx)(_,{step:t,stepIndex:e,onUpdate:function(t){return function(t,e){var n=f(r.steps);n[t]=e,i(m(m({},r),{},{steps:n}))}(e,t)},onDelete:function(){return t=e,n=r.steps.filter(function(e,r){return r!==t}),void i(m(m({},r),{},{steps:n}));var t,n}})]},t.id||e)}):(0,c.jsx)("div",{className:"msf-empty-state",children:(0,c.jsx)("p",{children:(0,o.__)("No steps yet. Add your first step to get started.","multi-step-form-builder")})}),(0,c.jsx)(a.Button,{variant:"secondary",onClick:D,className:"msf-add-step-btn",children:(0,o.__)("Add Step","multi-step-form-builder")})]}):"settings"===t.name?(0,c.jsx)(w,{settings:r.settings||{},onUpdate:I,formId:N}):void 0});var e}})]})}}}]);