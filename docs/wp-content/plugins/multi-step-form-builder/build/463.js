/*! For license information please see 463.js.LICENSE.txt */
"use strict"; (self.webpackChunkmulti_step_form_builder = self.webpackChunkmulti_step_form_builder || []).push([[463], { 463(t, r, e) { e.d(r, { default: () => D }); var n = e(594), o = e(842), i = e.n(o); function u() { var t, r, e = "function" == typeof Symbol ? Symbol : {}, n = e.iterator || "@@iterator", o = e.toStringTag || "@@toStringTag"; function i(e, n, o, i) { var u = n && n.prototype instanceof s ? n : s, f = Object.create(u.prototype); return a(f, "_invoke", function (e, n, o) { var i, u, a, s = 0, f = o || [], l = !1, p = { p: 0, n: 0, v: t, a: y, f: y.bind(t, 4), d: function (r, e) { return i = r, u = 0, a = t, p.n = e, c } }; function y(e, n) { for (u = e, a = n, r = 0; !l && s && !o && r < f.length; r++) { var o, i = f[r], y = p.p, v = i[2]; e > 3 ? (o = v === n) && (a = i[(u = i[4]) ? 5 : (u = 3, 3)], i[4] = i[5] = t) : i[0] <= y && ((o = e < 2 && y < i[1]) ? (u = 0, p.v = n, p.n = i[1]) : y < v && (o = e < 3 || i[0] > n || n > v) && (i[4] = e, i[5] = n, p.n = v, u = 0)) } if (o || e > 1) return c; throw l = !0, n } return function (o, f, v) { if (s > 1) throw TypeError("Generator is already running"); for (l && 1 === f && y(f, v), u = f, a = v; (r = u < 2 ? t : a) || !l;) { i || (u ? u < 3 ? (u > 1 && (p.n = -1), y(u, a)) : p.n = a : p.v = a); try { if (s = 2, i) { if (u || (o = "next"), r = i[o]) { if (!(r = r.call(i, a))) throw TypeError("iterator result is not an object"); if (!r.done) return r; a = r.value, u < 2 && (u = 0) } else 1 === u && (r = i.return) && r.call(i), u < 2 && (a = TypeError("The iterator does not provide a '" + o + "' method"), u = 1); i = t } else if ((r = (l = p.n < 0) ? a : e.call(n, p)) !== c) break } catch (r) { i = t, u = 1, a = r } finally { s = 1 } } return { value: r, done: l } } }(e, o, i), !0), f } var c = {}; function s() { } function f() { } function l() { } r = Object.getPrototypeOf; var p = [][n] ? r(r([][n]())) : (a(r = {}, n, function () { return this }), r), y = l.prototype = s.prototype = Object.create(p); function v(t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, l) : (t.__proto__ = l, a(t, o, "GeneratorFunction")), t.prototype = Object.create(y), t } return f.prototype = l, a(y, "constructor", l), a(l, "constructor", f), f.displayName = "GeneratorFunction", a(l, o, "GeneratorFunction"), a(y), a(y, o, "Generator"), a(y, n, function () { return this }), a(y, "toString", function () { return "[object Generator]" }), (u = function () { return { w: i, m: v } })() } function a(t, r, e, n) { var o = Object.defineProperty; try { o({}, "", {}) } catch (t) { o = 0 } a = function (t, r, e, n) { function i(r, e) { a(t, r, function (t) { return this._invoke(r, e, t) }) } r ? o ? o(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }) : t[r] = e : (i("next", 0), i("throw", 1), i("return", 2)) }, a(t, r, e, n) } function c(t, r, e, n, o, i, u) { try { var a = t[i](u), c = a.value } catch (t) { return void e(t) } a.done ? r(c) : Promise.resolve(c).then(n, o) } function s(t) { return function () { var r = this, e = arguments; return new Promise(function (n, o) { var i = t.apply(r, e); function u(t) { c(i, n, o, u, a, "next", t) } function a(t) { c(i, n, o, u, a, "throw", t) } u(void 0) }) } } var f = function () { var t = s(u().m(function t(r) { return u().w(function (t) { for (; ;)switch (t.n) { case 0: return t.n = 1, i()({ path: "/msf/v1/forms/".concat(r) }); case 1: return t.a(2, t.v) } }, t) })); return function (r) { return t.apply(this, arguments) } }(), l = function () { var t = s(u().m(function t(r, e) { var n, o; return u().w(function (t) { for (; ;)switch (t.n) { case 0: return o = { path: "/msf/v1/forms/success.json", method: "GET", data: e, headers: { "X-WP-Nonce": null === (n = window) || void 0 === n || null === (n = n.msfFrontend) || void 0 === n ? void 0 : n.nonce } }, t.n = 1, i()(o); case 1: return t.a(2, t.v) } }, t) })); return function (r, e) { return t.apply(this, arguments) } }(); function p() { var t, r, e = "function" == typeof Symbol ? Symbol : {}, n = e.iterator || "@@iterator", o = e.toStringTag || "@@toStringTag"; function i(e, n, o, i) { var c = n && n.prototype instanceof a ? n : a, s = Object.create(c.prototype); return y(s, "_invoke", function (e, n, o) { var i, a, c, s = 0, f = o || [], l = !1, p = { p: 0, n: 0, v: t, a: y, f: y.bind(t, 4), d: function (r, e) { return i = r, a = 0, c = t, p.n = e, u } }; function y(e, n) { for (a = e, c = n, r = 0; !l && s && !o && r < f.length; r++) { var o, i = f[r], y = p.p, v = i[2]; e > 3 ? (o = v === n) && (c = i[(a = i[4]) ? 5 : (a = 3, 3)], i[4] = i[5] = t) : i[0] <= y && ((o = e < 2 && y < i[1]) ? (a = 0, p.v = n, p.n = i[1]) : y < v && (o = e < 3 || i[0] > n || n > v) && (i[4] = e, i[5] = n, p.n = v, a = 0)) } if (o || e > 1) return u; throw l = !0, n } return function (o, f, v) { if (s > 1) throw TypeError("Generator is already running"); for (l && 1 === f && y(f, v), a = f, c = v; (r = a < 2 ? t : c) || !l;) { i || (a ? a < 3 ? (a > 1 && (p.n = -1), y(a, c)) : p.n = c : p.v = c); try { if (s = 2, i) { if (a || (o = "next"), r = i[o]) { if (!(r = r.call(i, c))) throw TypeError("iterator result is not an object"); if (!r.done) return r; c = r.value, a < 2 && (a = 0) } else 1 === a && (r = i.return) && r.call(i), a < 2 && (c = TypeError("The iterator does not provide a '" + o + "' method"), a = 1); i = t } else if ((r = (l = p.n < 0) ? c : e.call(n, p)) !== u) break } catch (r) { i = t, a = 1, c = r } finally { s = 1 } } return { value: r, done: l } } }(e, o, i), !0), s } var u = {}; function a() { } function c() { } function s() { } r = Object.getPrototypeOf; var f = [][n] ? r(r([][n]())) : (y(r = {}, n, function () { return this }), r), l = s.prototype = a.prototype = Object.create(f); function v(t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, s) : (t.__proto__ = s, y(t, o, "GeneratorFunction")), t.prototype = Object.create(l), t } return c.prototype = s, y(l, "constructor", s), y(s, "constructor", c), c.displayName = "GeneratorFunction", y(s, o, "GeneratorFunction"), y(l), y(l, o, "Generator"), y(l, n, function () { return this }), y(l, "toString", function () { return "[object Generator]" }), (p = function () { return { w: i, m: v } })() } function y(t, r, e, n) { var o = Object.defineProperty; try { o({}, "", {}) } catch (t) { o = 0 } y = function (t, r, e, n) { function i(r, e) { y(t, r, function (t) { return this._invoke(r, e, t) }) } r ? o ? o(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }) : t[r] = e : (i("next", 0), i("throw", 1), i("return", 2)) }, y(t, r, e, n) } function v(t, r, e, n, o, i, u) { try { var a = t[i](u), c = a.value } catch (t) { return void e(t) } a.done ? r(c) : Promise.resolve(c).then(n, o) } function d(t, r) { return function (t) { if (Array.isArray(t)) return t }(t) || function (t, r) { var e = null == t ? null : "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"]; if (null != e) { var n, o, i, u, a = [], c = !0, s = !1; try { if (i = (e = e.call(t)).next, 0 === r) { if (Object(e) !== e) return; c = !1 } else for (; !(c = (n = i.call(e)).done) && (a.push(n.value), a.length !== r); c = !0); } catch (t) { s = !0, o = t } finally { try { if (!c && null != e.return && (u = e.return(), Object(u) !== u)) return } finally { if (s) throw o } } return a } }(t, r) || function (t, r) { if (t) { if ("string" == typeof t) return h(t, r); var e = {}.toString.call(t).slice(8, -1); return "Object" === e && t.constructor && (e = t.constructor.name), "Map" === e || "Set" === e ? Array.from(t) : "Arguments" === e || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e) ? h(t, r) : void 0 } }(t, r) || function () { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") }() } function h(t, r) { (null == r || r > t.length) && (r = t.length); for (var e = 0, n = Array(r); e < r; e++)n[e] = t[e]; return n } function b(t) { return b = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, b(t) } function m() { var t, r, e = "function" == typeof Symbol ? Symbol : {}, n = e.iterator || "@@iterator", o = e.toStringTag || "@@toStringTag"; function i(e, n, o, i) { var c = n && n.prototype instanceof a ? n : a, s = Object.create(c.prototype); return g(s, "_invoke", function (e, n, o) { var i, a, c, s = 0, f = o || [], l = !1, p = { p: 0, n: 0, v: t, a: y, f: y.bind(t, 4), d: function (r, e) { return i = r, a = 0, c = t, p.n = e, u } }; function y(e, n) { for (a = e, c = n, r = 0; !l && s && !o && r < f.length; r++) { var o, i = f[r], y = p.p, v = i[2]; e > 3 ? (o = v === n) && (c = i[(a = i[4]) ? 5 : (a = 3, 3)], i[4] = i[5] = t) : i[0] <= y && ((o = e < 2 && y < i[1]) ? (a = 0, p.v = n, p.n = i[1]) : y < v && (o = e < 3 || i[0] > n || n > v) && (i[4] = e, i[5] = n, p.n = v, a = 0)) } if (o || e > 1) return u; throw l = !0, n } return function (o, f, v) { if (s > 1) throw TypeError("Generator is already running"); for (l && 1 === f && y(f, v), a = f, c = v; (r = a < 2 ? t : c) || !l;) { i || (a ? a < 3 ? (a > 1 && (p.n = -1), y(a, c)) : p.n = c : p.v = c); try { if (s = 2, i) { if (a || (o = "next"), r = i[o]) { if (!(r = r.call(i, c))) throw TypeError("iterator result is not an object"); if (!r.done) return r; c = r.value, a < 2 && (a = 0) } else 1 === a && (r = i.return) && r.call(i), a < 2 && (c = TypeError("The iterator does not provide a '" + o + "' method"), a = 1); i = t } else if ((r = (l = p.n < 0) ? c : e.call(n, p)) !== u) break } catch (r) { i = t, a = 1, c = r } finally { s = 1 } } return { value: r, done: l } } }(e, o, i), !0), s } var u = {}; function a() { } function c() { } function s() { } r = Object.getPrototypeOf; var f = [][n] ? r(r([][n]())) : (g(r = {}, n, function () { return this }), r), l = s.prototype = a.prototype = Object.create(f); function p(t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, s) : (t.__proto__ = s, g(t, o, "GeneratorFunction")), t.prototype = Object.create(l), t } return c.prototype = s, g(l, "constructor", s), g(s, "constructor", c), c.displayName = "GeneratorFunction", g(s, o, "GeneratorFunction"), g(l), g(l, o, "Generator"), g(l, n, function () { return this }), g(l, "toString", function () { return "[object Generator]" }), (m = function () { return { w: i, m: p } })() } function g(t, r, e, n) { var o = Object.defineProperty; try { o({}, "", {}) } catch (t) { o = 0 } g = function (t, r, e, n) { function i(r, e) { g(t, r, function (t) { return this._invoke(r, e, t) }) } r ? o ? o(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }) : t[r] = e : (i("next", 0), i("throw", 1), i("return", 2)) }, g(t, r, e, n) } function j(t, r, e, n, o, i, u) { try { var a = t[i](u), c = a.value } catch (t) { return void e(t) } a.done ? r(c) : Promise.resolve(c).then(n, o) } function w(t, r) { var e = Object.keys(t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(t); r && (n = n.filter(function (r) { return Object.getOwnPropertyDescriptor(t, r).enumerable })), e.push.apply(e, n) } return e } function S(t) { for (var r = 1; r < arguments.length; r++) { var e = null != arguments[r] ? arguments[r] : {}; r % 2 ? w(Object(e), !0).forEach(function (r) { O(t, r, e[r]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(e)) : w(Object(e)).forEach(function (r) { Object.defineProperty(t, r, Object.getOwnPropertyDescriptor(e, r)) }) } return t } function O(t, r, e) { return (r = function (t) { var r = function (t) { if ("object" != b(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var e = r.call(t, "string"); if ("object" != b(e)) return e; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" == b(r) ? r : r + "" }(r)) in t ? Object.defineProperty(t, r, { value: e, enumerable: !0, configurable: !0, writable: !0 }) : t[r] = e, t } function P(t, r) { return function (t) { if (Array.isArray(t)) return t }(t) || function (t, r) { var e = null == t ? null : "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"]; if (null != e) { var n, o, i, u, a = [], c = !0, s = !1; try { if (i = (e = e.call(t)).next, 0 === r) { if (Object(e) !== e) return; c = !1 } else for (; !(c = (n = i.call(e)).done) && (a.push(n.value), a.length !== r); c = !0); } catch (t) { s = !0, o = t } finally { try { if (!c && null != e.return && (u = e.return(), Object(u) !== u)) return } finally { if (s) throw o } } return a } }(t, r) || function (t, r) { if (t) { if ("string" == typeof t) return x(t, r); var e = {}.toString.call(t).slice(8, -1); return "Object" === e && t.constructor && (e = t.constructor.name), "Map" === e || "Set" === e ? Array.from(t) : "Arguments" === e || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e) ? x(t, r) : void 0 } }(t, r) || function () { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") }() } function x(t, r) { (null == r || r > t.length) && (r = t.length); for (var e = 0, n = Array(r); e < r; e++)n[e] = t[e]; return n } var T = function (t, r, e) { var o = P((0, n.useState)(0), 2), i = o[0], u = o[1], a = P((0, n.useState)({}), 2), c = a[0], s = a[1], f = P((0, n.useState)({}), 2), p = f[0], y = f[1], v = P((0, n.useState)(!1), 2), d = v[0], h = v[1], b = P((0, n.useState)(!1), 2), g = b[0], w = b[1], x = P((0, n.useState)(""), 2), T = x[0], k = x[1], E = P((0, n.useState)(!1), 2), A = E[0], _ = E[1], F = (0, n.useCallback)(function (t, r) { s(function (e) { return S(S({}, e), {}, O({}, t, r)) }), p[t] && y(function (r) { return S(S({}, r), {}, O({}, t, null)) }) }, [p]), G = (0, n.useCallback)(function () { if (!r || !r.steps) return !0; if (i >= r.steps.length) return !0; var t = function (t, r) { var e, n = {}; return null === (e = t.fields) || void 0 === e || e.forEach(function (t) { var e = r[t.name]; t.required && (!e || Array.isArray(e) && 0 === e.length) && (n[t.name] = "".concat(t.label, " is required")), "email" === t.type && e && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e) && (n[t.name] = "Please enter a valid email address"), "url" === t.type && e && !function (t) { try { return new URL(t), !0 } catch (t) { return !1 } }(e) && (n[t.name] = "Please enter a valid URL") }), n }(r.steps[i], c); return y(t), 0 === Object.keys(t).length }, [r, i, c]), C = (0, n.useCallback)(function (t) { t && t.preventDefault(), G() ? (u(function (t) { return t + 1 }), y({}), window.scrollTo({ top: 0, behavior: "smooth" })) : window.scrollTo({ top: 0, behavior: "smooth" }) }, [G]), N = (0, n.useCallback)(function () { u(function (t) { return t - 1 }), y({}), window.scrollTo({ top: 0, behavior: "smooth" }) }, []), D = (0, n.useCallback)(function () { var n, o = (n = m().m(function n(o) { var i, a, s; return m().w(function (n) { for (; ;)switch (n.p = n.n) { case 0: if (o.preventDefault(), G()) { n.n = 1; break } return window.scrollTo({ top: 0, behavior: "smooth" }), n.a(2); case 1: return n.p = 1, h(!0), n.n = 2, l(t, c); case 2: i = n.v, console.log(i), k(i.message), w(!0), _(!1), u(r.steps.length), window.scrollTo({ top: 0, behavior: "smooth" }), e && setTimeout(function () { return e() }, 2e3), n.n = 4; break; case 3: n.p = 3, s = n.v, console.error("Error submitting form:", s), null !== (a = s.data) && void 0 !== a && a.errors ? (y(s.data.errors), k("Please correct the errors and try again.")) : k(s.message || "An error occurred while submitting the form. Please try again."), _(!0), u(r.steps.length), window.scrollTo({ top: 0, behavior: "smooth" }); case 4: return n.p = 4, h(!1), n.f(4); case 5: return n.a(2) } }, n, null, [[1, 3, 4, 5]]) }), function () { var t = this, r = arguments; return new Promise(function (e, o) { var i = n.apply(t, r); function u(t) { j(i, e, o, u, a, "next", t) } function a(t) { j(i, e, o, u, a, "throw", t) } u(void 0) }) }); return function (t) { return o.apply(this, arguments) } }(), [t, c, G, r, e]), I = (0, n.useCallback)(function () { u(r.steps.length - 1), w(!1), _(!1) }, [r]); return { currentStep: i, formData: c, errors: p, submitting: d, submitted: g, successMessage: T, hasError: A, handleNext: C, handlePrevious: N, handleSubmit: D, updateFieldValue: F, resetForm: I, setCurrentStep: u } }, k = e(848); const E = function () { return (0, k.jsx)("div", { className: "msf-spinner" }) }; function A(t, r) { (null == r || r > t.length) && (r = t.length); for (var e = 0, n = Array(r); e < r; e++)n[e] = t[e]; return n } var _ = (0, n.lazy)(function () { return e.e(304).then(e.bind(e, 304)) }), F = (0, n.lazy)(function () { return e.e(573).then(e.bind(e, 573)) }), G = (0, n.lazy)(function () { return e.e(891).then(e.bind(e, 891)) }), C = (0, n.lazy)(function () { return e.e(166).then(e.bind(e, 166)) }), N = (0, n.lazy)(function () { return e.e(399).then(e.bind(e, 399)) }); const D = function (t) { var r = t.formId, e = t.onSuccess, o = function (t) { var r = d((0, n.useState)(null), 2), e = r[0], o = r[1], i = d((0, n.useState)(!0), 2), u = i[0], a = i[1], c = d((0, n.useState)(null), 2), s = c[0], l = c[1]; return (0, n.useEffect)(function () { var r = function () { var r, e = (r = p().m(function r() { var e, n; return p().w(function (r) { for (; ;)switch (r.p = r.n) { case 0: return r.p = 0, a(!0), r.n = 1, f(t); case 1: e = r.v, o(e), r.n = 3; break; case 2: r.p = 2, n = r.v, console.error("Error loading form:", n), l(n); case 3: return r.p = 3, a(!1), r.f(3); case 4: return r.a(2) } }, r, null, [[0, 2, 3, 4]]) }), function () { var t = this, e = arguments; return new Promise(function (n, o) { var i = r.apply(t, e); function u(t) { v(i, n, o, u, a, "next", t) } function a(t) { v(i, n, o, u, a, "throw", t) } u(void 0) }) }); return function () { return e.apply(this, arguments) } }(); t && r() }, [t]), { config: e, loading: u, error: s } }(r), i = o.config, u = o.loading, a = o.error, c = T(r, i, e), s = c.currentStep, l = c.formData, y = c.errors, h = c.submitting, b = (c.submitted, c.successMessage), m = c.hasError, g = c.handleNext, j = c.handlePrevious, w = c.handleSubmit, S = c.updateFieldValue, O = c.resetForm, P = (0, n.useRef)(null); (0, n.useEffect)(function () { if (P.current) { var t = P.current.querySelector("input, select, textarea"); t && t.focus() } }, [s]); var x = (0, n.useCallback)(function (t) { if (i && i.steps) { var r = s === i.steps.length - 1; "Enter" !== t.key || "TEXTAREA" === t.target.tagName || r || (t.preventDefault(), g()) } }, [i, s, g]); if (u) return (0, k.jsxs)("div", { className: "msf-form-loading", children: [(0, k.jsx)(E, {}), (0, k.jsx)("p", { children: "Loading form..." })] }); if (a) return (0, k.jsx)("p", { children: "Error loading form. Please try again later." }); if (!i || !i.steps || 0 === i.steps.length) return (0, k.jsx)("p", { children: "Form not found or has no steps." }); var D, I = [].concat(function (t) { if (Array.isArray(t)) return A(t) }(D = i.steps) || function (t) { if ("undefined" != typeof Symbol && null != t[Symbol.iterator] || null != t["@@iterator"]) return Array.from(t) }(D) || function (t, r) { if (t) { if ("string" == typeof t) return A(t, r); var e = {}.toString.call(t).slice(8, -1); return "Object" === e && t.constructor && (e = t.constructor.name), "Map" === e || "Set" === e ? Array.from(t) : "Arguments" === e || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e) ? A(t, r) : void 0 } }(D) || function () { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") }(), [{ title: "Finish", description: "", fields: [] }]), M = s === i.steps.length, z = s === i.steps.length - 1, L = i.settings || {}; return (0, k.jsx)("div", { className: "msf-form-wrapper", ref: P, children: (0, k.jsxs)(n.Suspense, { fallback: (0, k.jsxs)("div", { className: "msf-form-loading", children: [(0, k.jsx)(E, {}), (0, k.jsx)("p", { children: "Loading form..." })] }), children: [(0, k.jsx)(F, { formConfig: i }), M ? (0, k.jsx)(N, { hasError: m, successMessage: b, errors: y, onBack: O }) : (0, k.jsxs)("form", { onSubmit: w, onKeyDown: x, className: "msf-form", children: [(0, k.jsx)(G, { step: i.steps[s], formData: l, errors: y, updateFieldValue: S }), (0, k.jsx)(C, { currentStep: s, isLastFormStep: z, handlePrevious: j, handleNext: g, submitting: h, settings: L })] }), (0, k.jsx)(_, { currentStep: s, totalSteps: I.length, steps: I })] }) }) } } }]);