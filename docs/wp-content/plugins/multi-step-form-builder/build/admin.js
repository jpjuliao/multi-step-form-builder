/*! For license information please see admin.js.LICENSE.txt */
(()=>{"use strict";var e={338(e,t,r){var n=r(206);t.H=n.createRoot,n.hydrateRoot},20(e,t,r){var n=r(594),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,r){var n,i={},u=null,c=null;for(n in void 0!==r&&(u=""+r),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)l.call(t,n)&&!s.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:o,type:e,key:u,ref:c,props:i,_owner:a.current}}t.Fragment=i,t.jsx=u,t.jsxs=u},848(e,t,r){e.exports=r(20)},594(e){e.exports=React},206(e){e.exports=ReactDOM}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n=r(338);const o=wp.i18n;var i=r(594);const l=wp.apiFetch;var a=r.n(l);const s=wp.components;var u=r(848);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function f(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach(function(t){d(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e,t,r){return(t=function(e){var t=function(e){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){if(e){if("string"==typeof e)return y(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const h=function(e){var t,r,n,l,a=e.field,c=e.onUpdate,m=e.onDelete,y=(r=(0,i.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],s=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(u)throw o}}return a}}(r,n)||b(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=y[0],v=y[1],j=function(e,t){c(p(p({},a),{},d({},e,t)))},x=function(e,t,r){var n=f(a.options);n[e]=p(p({},n[e]),{},d({},t,r)),j("options",n)},_=["select","radio","checkbox"].includes(a.type);return(0,u.jsxs)("div",{className:"msf-field-editor",children:[(0,u.jsxs)("div",{className:"msf-field-header",onClick:function(){return v(!h)},children:[(0,u.jsx)("span",{className:"msf-field-type-icon",children:(l=a.type,{text:"ðŸ“",email:"ðŸ“§",textarea:"ðŸ“„",select:"ðŸ“‹",radio:"ðŸ”˜",checkbox:"â˜‘ï¸",number:"ðŸ”¢",tel:"ðŸ“±",url:"ðŸ”—",date:"ðŸ“…"}[l]||"ðŸ“")}),(0,u.jsx)("span",{className:"msf-field-label",children:a.label||(0,o.__)("Untitled Field","multi-step-form-builder")}),(0,u.jsxs)("div",{className:"msf-field-actions",children:[(0,u.jsx)(s.Button,{icon:"arrow-down",label:h?(0,o.__)("Collapse","multi-step-form-builder"):(0,o.__)("Expand","multi-step-form-builder"),className:"msf-toggle-btn ".concat(h?"expanded":"")}),(0,u.jsx)(s.Button,{icon:"trash",label:(0,o.__)("Delete","multi-step-form-builder"),onClick:function(e){e.stopPropagation(),m()},isDestructive:!0})]})]}),h&&(0,u.jsxs)("div",{className:"msf-field-config",children:[(0,u.jsx)(s.TextControl,{label:(0,o.__)("Label","multi-step-form-builder"),value:a.label,onChange:function(e){return j("label",e)}}),(0,u.jsx)(s.TextControl,{label:(0,o.__)("Field Name","multi-step-form-builder"),value:a.name,onChange:function(e){return j("name",e)},help:(0,o.__)("Unique identifier for this field (no spaces)","multi-step-form-builder")}),"checkbox"!==a.type&&"radio"!==a.type&&"select"!==a.type&&(0,u.jsx)(s.TextControl,{label:(0,o.__)("Placeholder","multi-step-form-builder"),value:a.placeholder||"",onChange:function(e){return j("placeholder",e)}}),"textarea"===a.type&&(0,u.jsx)(s.TextControl,{label:(0,o.__)("Rows","multi-step-form-builder"),type:"number",value:a.rows||4,onChange:function(e){return j("rows",parseInt(e))}}),"number"===a.type&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(s.TextControl,{label:(0,o.__)("Min Value","multi-step-form-builder"),type:"number",value:a.min||"",onChange:function(e){return j("min",e)}}),(0,u.jsx)(s.TextControl,{label:(0,o.__)("Max Value","multi-step-form-builder"),type:"number",value:a.max||"",onChange:function(e){return j("max",e)}}),(0,u.jsx)(s.TextControl,{label:(0,o.__)("Step","multi-step-form-builder"),type:"number",value:a.step||"1",onChange:function(e){return j("step",e)}})]}),_&&(0,u.jsxs)("div",{className:"msf-options-editor",children:[(0,u.jsx)("label",{className:"components-base-control__label",children:(0,o.__)("Options","multi-step-form-builder")}),null===(t=a.options)||void 0===t?void 0:t.map(function(e,t){return(0,u.jsxs)("div",{className:"msf-option-row",children:[(0,u.jsx)(s.TextControl,{placeholder:(0,o.__)("Label","multi-step-form-builder"),value:e.label,onChange:function(e){return x(t,"label",e)}}),(0,u.jsx)(s.TextControl,{placeholder:(0,o.__)("Value","multi-step-form-builder"),value:e.value,onChange:function(e){return x(t,"value",e)}}),(0,u.jsx)(s.Button,{icon:"trash",onClick:function(){return function(e){var t=a.options.filter(function(t,r){return r!==e});j("options",t)}(t)},isDestructive:!0,isSmall:!0})]},t)}),(0,u.jsx)(s.Button,{onClick:function(){var e=[].concat(f(a.options||[]),[{label:"",value:""}]);j("options",e)},variant:"secondary",isSmall:!0,children:(0,o.__)("Add Option","multi-step-form-builder")})]}),(0,u.jsx)(s.TextareaControl,{label:(0,o.__)("Help Text","multi-step-form-builder"),value:a.helpText||"",onChange:function(e){return j("helpText",e)},rows:2}),(0,u.jsx)(s.ToggleControl,{label:(0,o.__)("Required","multi-step-form-builder"),checked:a.required||!1,onChange:function(e){return j("required",e)}})]})]})};var v=[{type:"text",label:"Text Field",icon:"ðŸ“",defaultConfig:{type:"text",label:"Text Field",name:"",placeholder:"",required:!1,helpText:""}},{type:"email",label:"Email",icon:"ðŸ“§",defaultConfig:{type:"email",label:"Email Address",name:"",placeholder:"example@email.com",required:!1,helpText:""}},{type:"textarea",label:"Textarea",icon:"ðŸ“„",defaultConfig:{type:"textarea",label:"Message",name:"",placeholder:"",required:!1,rows:4,helpText:""}},{type:"select",label:"Dropdown",icon:"ðŸ“‹",defaultConfig:{type:"select",label:"Select Option",name:"",required:!1,options:[{label:"Option 1",value:"option1"},{label:"Option 2",value:"option2"}],helpText:""}},{type:"radio",label:"Radio Buttons",icon:"ðŸ”˜",defaultConfig:{type:"radio",label:"Choose One",name:"",required:!1,options:[{label:"Option 1",value:"option1"},{label:"Option 2",value:"option2"}],helpText:""}},{type:"checkbox",label:"Checkboxes",icon:"â˜‘ï¸",defaultConfig:{type:"checkbox",label:"Select All That Apply",name:"",required:!1,options:[{label:"Option 1",value:"option1"},{label:"Option 2",value:"option2"}],helpText:""}},{type:"number",label:"Number",icon:"ðŸ”¢",defaultConfig:{type:"number",label:"Number",name:"",placeholder:"",required:!1,min:"",max:"",step:"1",helpText:""}},{type:"tel",label:"Phone",icon:"ðŸ“±",defaultConfig:{type:"tel",label:"Phone Number",name:"",placeholder:"(555) 123-4567",required:!1,helpText:""}},{type:"url",label:"URL",icon:"ðŸ”—",defaultConfig:{type:"url",label:"Website URL",name:"",placeholder:"https://example.com",required:!1,helpText:""}},{type:"date",label:"Date",icon:"ðŸ“…",defaultConfig:{type:"date",label:"Date",name:"",required:!1,helpText:""}}];function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function x(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach(function(t){O(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function O(e,t,r){return(t=function(e){var t=function(e){if("object"!=j(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==j(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],s=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(u)throw o}}return a}}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return C(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const T=function(e){var t,r=e.step,n=e.stepIndex,l=e.onUpdate,a=e.onDelete,c=w((0,i.useState)(!1),2),f=c[0],m=c[1],p=function(e,t){l(g(g({},r),{},O({},e,t)))},d=function(e,t){var n=x(r.fields),o=w(n.splice(e,1),1)[0];n.splice(t,0,o),p("fields",n)};return(0,u.jsxs)("div",{className:"msf-step-editor",children:[(0,u.jsxs)("div",{className:"msf-step-header",children:[(0,u.jsx)(s.TextControl,{label:(0,o.__)("Step Title","multi-step-form-builder"),value:r.title||"",onChange:function(e){return p("title",e)},placeholder:(0,o.__)("Step ".concat(n+1),"multi-step-form-builder")}),(0,u.jsx)(s.Button,{icon:"trash",label:(0,o.__)("Delete Step","multi-step-form-builder"),onClick:a,isDestructive:!0})]}),(0,u.jsx)(s.TextControl,{label:(0,o.__)("Step Description","multi-step-form-builder"),value:r.description||"",onChange:function(e){return p("description",e)},placeholder:(0,o.__)("Optional description for this step","multi-step-form-builder")}),(0,u.jsxs)("div",{className:"msf-fields-list",children:[(0,u.jsx)("h4",{children:(0,o.__)("Fields","multi-step-form-builder")}),(null===(t=r.fields)||void 0===t?void 0:t.length)>0?r.fields.map(function(e,t){return(0,u.jsxs)("div",{className:"msf-field-item",children:[t>0&&(0,u.jsx)(s.Button,{icon:"arrow-up",onClick:function(){return d(t,t-1)},isSmall:!0,className:"msf-move-btn"}),(0,u.jsx)(h,{field:e,onUpdate:function(e){return function(e,t){var n=x(r.fields);n[e]=t,p("fields",n)}(t,e)},onDelete:function(){return e=t,n=r.fields.filter(function(t,r){return r!==e}),void p("fields",n);var e,n}}),t<r.fields.length-1&&(0,u.jsx)(s.Button,{icon:"arrow-down",onClick:function(){return d(t,t+1)},isSmall:!0,className:"msf-move-btn"})]},e.id||t)}):(0,u.jsx)("p",{className:"msf-empty-message",children:(0,o.__)("No fields yet. Add your first field below.","multi-step-form-builder")})]}),(0,u.jsxs)("div",{className:"msf-add-field",children:[(0,u.jsx)(s.Button,{variant:"secondary",onClick:function(){return m(!f)},children:f?(0,o.__)("Hide Field Types","multi-step-form-builder"):(0,o.__)("Add Field","multi-step-form-builder")}),f&&(0,u.jsx)("div",{className:"msf-field-types-grid",children:v.map(function(e){return(0,u.jsxs)("button",{className:"msf-field-type-btn",onClick:function(){return function(e){var t=g(g({},e.defaultConfig),{},{name:"field_".concat(Date.now()),id:"field_".concat(Date.now())}),n=[].concat(x(r.fields||[]),[t]);p("fields",n),m(!1)}(e)},children:[(0,u.jsx)("span",{className:"msf-field-type-icon",children:e.icon}),(0,u.jsx)("span",{className:"msf-field-type-label",children:e.label})]},e.type)})})]})]})};function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach(function(t){E(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function E(e,t,r){return(t=function(e){var t=function(e){if("object"!=P(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==P(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const A=function(e){var t=e.settings,r=e.onUpdate,n=function(e,n){r(N(N({},t),{},E({},e,n)))};return(0,u.jsxs)("div",{className:"msf-form-settings",children:[(0,u.jsxs)(s.PanelBody,{title:(0,o.__)("Button Labels","multi-step-form-builder"),initialOpen:!0,children:[(0,u.jsx)(s.TextControl,{label:(0,o.__)("Next Button Text","multi-step-form-builder"),value:t.nextButtonText||"Next",onChange:function(e){return n("nextButtonText",e)}}),(0,u.jsx)(s.TextControl,{label:(0,o.__)("Previous Button Text","multi-step-form-builder"),value:t.previousButtonText||"Previous",onChange:function(e){return n("previousButtonText",e)}}),(0,u.jsx)(s.TextControl,{label:(0,o.__)("Submit Button Text","multi-step-form-builder"),value:t.submitButtonText||"Submit",onChange:function(e){return n("submitButtonText",e)}})]}),(0,u.jsx)(s.PanelBody,{title:(0,o.__)("Messages","multi-step-form-builder"),initialOpen:!0,children:(0,u.jsx)(s.TextareaControl,{label:(0,o.__)("Success Message","multi-step-form-builder"),value:t.successMessage||"Thank you for your submission!",onChange:function(e){return n("successMessage",e)},rows:3})}),(0,u.jsxs)(s.PanelBody,{title:(0,o.__)("Display Conditions","multi-step-form-builder"),initialOpen:!0,children:[(0,u.jsx)(s.ToggleControl,{label:(0,o.__)("Show in Modal on Page Load","multi-step-form-builder"),checked:t.showModalOnLoad||!1,onChange:function(e){return n("showModalOnLoad",e)},help:(0,o.__)("Display the form in a modal popup when the page loads","multi-step-form-builder")}),t.showModalOnLoad&&(0,u.jsx)(s.TextControl,{label:(0,o.__)("Delay (seconds)","multi-step-form-builder"),type:"number",value:t.modalDelay||0,onChange:function(e){return n("modalDelay",parseInt(e)||0)},help:(0,o.__)("Delay before showing the modal (0 for immediate)","multi-step-form-builder"),min:0,max:60})]})]})};function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach(function(t){F(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function F(e,t,r){return(t=function(e){var t=function(e){if("object"!=k(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==k(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const U=function(e){var t=e.formConfig,r=e.updateFormConfig,n=t.title,i=t.description,l=t.showTitle,a=void 0===l||l,c=t.showDescription,f=void 0===c||c,m=function(e,n){r(B(B({},t),{},F({},e,n)))};return(0,u.jsxs)("div",{className:"msf-form-header-settings",children:[(0,u.jsx)(s.ToggleControl,{label:(0,o.__)("Show Title","multi-step-form-builder"),checked:a,onChange:function(e){return m("showTitle",e)}}),a&&(0,u.jsx)(s.TextControl,{label:(0,o.__)("Form Title","multi-step-form-builder"),value:n||"",onChange:function(e){return m("title",e)},placeholder:(0,o.__)("Enter form title","multi-step-form-builder")}),(0,u.jsx)(s.ToggleControl,{label:(0,o.__)("Show Description","multi-step-form-builder"),checked:f,onChange:function(e){return m("showDescription",e)}}),f&&(0,u.jsx)(s.TextareaControl,{label:(0,o.__)("Form Description","multi-step-form-builder"),value:i||"",onChange:function(e){return m("description",e)},placeholder:(0,o.__)("Enter form description","multi-step-form-builder"),rows:3})]})};function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function L(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach(function(t){G(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function G(e,t,r){return(t=function(e){var t=function(e){if("object"!=R(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==R(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var s=n&&n.prototype instanceof a?n:a,u=Object.create(s.prototype);return $(u,"_invoke",function(r,n,o){var i,a,s,u=0,c=o||[],f=!1,m={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return i=t,a=0,s=e,m.n=r,l}};function p(r,n){for(a=r,s=n,t=0;!f&&u&&!o&&t<c.length;t++){var o,i=c[t],p=m.p,d=i[2];r>3?(o=d===n)&&(s=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=r<2&&p<i[1])?(a=0,m.v=n,m.n=i[1]):p<d&&(o=r<3||i[0]>n||n>d)&&(i[4]=r,i[5]=n,m.n=d,a=0))}if(o||r>1)return l;throw f=!0,n}return function(o,c,d){if(u>1)throw TypeError("Generator is already running");for(f&&1===c&&p(c,d),a=c,s=d;(t=a<2?e:s)||!f;){i||(a?a<3?(a>1&&(m.n=-1),p(a,s)):m.n=s:m.v=s);try{if(u=2,i){if(a||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,a<2&&(a=0)}else 1===a&&(t=i.return)&&t.call(i),a<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=e}else if((t=(f=m.n<0)?s:r.call(n,m))!==l)break}catch(t){i=e,a=1,s=t}finally{u=1}}return{value:t,done:f}}}(r,o,i),!0),u}var l={};function a(){}function s(){}function u(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):($(t={},n,function(){return this}),t),f=u.prototype=a.prototype=Object.create(c);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,$(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,$(f,"constructor",u),$(u,"constructor",s),s.displayName="GeneratorFunction",$(u,o,"GeneratorFunction"),$(f),$(f,o,"Generator"),$(f,n,function(){return this}),$(f,"toString",function(){return"[object Generator]"}),(H=function(){return{w:i,m}})()}function $(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}$=function(e,t,r,n){function i(t,r){$(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},$(e,t,r,n)}function V(e,t,r,n,o,i,l){try{var a=e[i](l),s=a.value}catch(e){return void r(e)}a.done?t(s):Promise.resolve(s).then(n,o)}function W(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function l(e){V(i,n,o,l,a,"next",e)}function a(e){V(i,n,o,l,a,"throw",e)}l(void 0)})}}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],s=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(u)throw o}}return a}}(e,t)||z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){if(e){if("string"==typeof e)return J(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?J(e,t):void 0}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const K=function(){var e,t=Y((0,i.useState)(null),2),r=t[0],n=t[1],l=Y((0,i.useState)(!0),2),c=l[0],f=l[1],m=Y((0,i.useState)(!1),2),p=m[0],d=m[1],b=Y((0,i.useState)(null),2),y=b[0],h=b[1],v=null===(e=window.msfAdmin)||void 0===e?void 0:e.formId;(0,i.useEffect)(function(){j()},[]);var j=function(){var e=W(H().m(function e(){var t,r;return H().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,f(!0),e.n=1,a()({path:"/msf/v1/forms/".concat(v),method:"GET"});case 1:t=e.v,n(t),e.n=3;break;case 2:e.p=2,r=e.v,console.error("Error loading form:",r),h({type:"error",message:(0,o.__)("Failed to load form","multi-step-form-builder")});case 3:return e.p=3,f(!1),e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}));return function(){return e.apply(this,arguments)}}(),x=function(){var e=W(H().m(function e(){var t;return H().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,d(!0),e.n=1,a()({path:"/msf/v1/forms/".concat(v),method:"POST",data:r});case 1:h({type:"success",message:(0,o.__)("Form saved successfully!","multi-step-form-builder")}),setTimeout(function(){return h(null)},3e3),e.n=3;break;case 2:e.p=2,t=e.v,console.error("Error saving form:",t),h({type:"error",message:(0,o.__)("Failed to save form","multi-step-form-builder")});case 3:return e.p=3,d(!1),e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}));return function(){return e.apply(this,arguments)}}(),_=function(){var e={id:"step_".concat(Date.now()),title:"",description:"",fields:[]};n(q(q({},r),{},{steps:[].concat(L(r.steps||[]),[e])}))},g=function(e,t){var o=L(r.steps),i=Y(o.splice(e,1),1)[0];o.splice(t,0,i),n(q(q({},r),{},{steps:o}))},O=function(e){n(q(q({},r),{},{settings:e}))};if(c)return(0,u.jsxs)("div",{className:"msf-loading",children:[(0,u.jsx)(s.Spinner,{}),(0,u.jsx)("p",{children:(0,o.__)("Loading form...","multi-step-form-builder")})]});var w=[{name:"header",title:(0,o.__)("Header","multi-step-form-builder"),className:"msf-tab-header"},{name:"steps",title:(0,o.__)("Steps","multi-step-form-builder"),className:"msf-tab-steps"},{name:"settings",title:(0,o.__)("Settings","multi-step-form-builder"),className:"msf-tab-settings"}];return(0,u.jsxs)("div",{className:"msf-form-builder",children:[y&&(0,u.jsx)(s.Notice,{status:y.type,onRemove:function(){return h(null)},isDismissible:!0,children:y.message}),(0,u.jsx)("div",{className:"msf-builder-header",children:(0,u.jsx)(s.Button,{variant:"primary",onClick:x,isBusy:p,disabled:p,children:p?(0,o.__)("Saving...","multi-step-form-builder"):(0,o.__)("Save Form","multi-step-form-builder")})}),(0,u.jsx)(s.TabPanel,{className:"msf-tabs",activeClass:"is-active",tabs:w,children:function(e){return"header"===e.name?(0,u.jsx)("div",{className:"msf-header-panel",children:(0,u.jsx)(U,{formConfig:r,updateFormConfig:n})}):"steps"===e.name?(0,u.jsxs)("div",{className:"msf-steps-panel",children:[(null===(t=r.steps)||void 0===t?void 0:t.length)>0?r.steps.map(function(e,t){return(0,u.jsxs)("div",{className:"msf-step-wrapper",children:[(0,u.jsxs)("div",{className:"msf-step-controls",children:[(0,u.jsxs)("span",{className:"msf-step-number",children:[(0,o.__)("Step","multi-step-form-builder")," ",t+1]}),(0,u.jsxs)("div",{className:"msf-step-move-buttons",children:[t>0&&(0,u.jsx)(s.Button,{icon:"arrow-up",onClick:function(){return g(t,t-1)},label:(0,o.__)("Move Up","multi-step-form-builder"),isSmall:!0}),t<r.steps.length-1&&(0,u.jsx)(s.Button,{icon:"arrow-down",onClick:function(){return g(t,t+1)},label:(0,o.__)("Move Down","multi-step-form-builder"),isSmall:!0})]})]}),(0,u.jsx)(T,{step:e,stepIndex:t,onUpdate:function(e){return function(e,t){var o=L(r.steps);o[e]=t,n(q(q({},r),{},{steps:o}))}(t,e)},onDelete:function(){return e=t,o=r.steps.filter(function(t,r){return r!==e}),void n(q(q({},r),{},{steps:o}));var e,o}})]},e.id||t)}):(0,u.jsx)("div",{className:"msf-empty-state",children:(0,u.jsx)("p",{children:(0,o.__)("No steps yet. Add your first step to get started.","multi-step-form-builder")})}),(0,u.jsx)(s.Button,{variant:"secondary",onClick:_,className:"msf-add-step-btn",children:(0,o.__)("Add Step","multi-step-form-builder")})]}):"settings"===e.name?(0,u.jsx)(A,{settings:r.settings||{},onUpdate:O}):void 0;var t}})]})};function Q(e){return function(e){if(Array.isArray(e))return oe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ne(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var s=n&&n.prototype instanceof a?n:a,u=Object.create(s.prototype);return Z(u,"_invoke",function(r,n,o){var i,a,s,u=0,c=o||[],f=!1,m={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return i=t,a=0,s=e,m.n=r,l}};function p(r,n){for(a=r,s=n,t=0;!f&&u&&!o&&t<c.length;t++){var o,i=c[t],p=m.p,d=i[2];r>3?(o=d===n)&&(s=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=r<2&&p<i[1])?(a=0,m.v=n,m.n=i[1]):p<d&&(o=r<3||i[0]>n||n>d)&&(i[4]=r,i[5]=n,m.n=d,a=0))}if(o||r>1)return l;throw f=!0,n}return function(o,c,d){if(u>1)throw TypeError("Generator is already running");for(f&&1===c&&p(c,d),a=c,s=d;(t=a<2?e:s)||!f;){i||(a?a<3?(a>1&&(m.n=-1),p(a,s)):m.n=s:m.v=s);try{if(u=2,i){if(a||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,a<2&&(a=0)}else 1===a&&(t=i.return)&&t.call(i),a<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=e}else if((t=(f=m.n<0)?s:r.call(n,m))!==l)break}catch(t){i=e,a=1,s=t}finally{u=1}}return{value:t,done:f}}}(r,o,i),!0),u}var l={};function a(){}function s(){}function u(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(Z(t={},n,function(){return this}),t),f=u.prototype=a.prototype=Object.create(c);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Z(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,Z(f,"constructor",u),Z(u,"constructor",s),s.displayName="GeneratorFunction",Z(u,o,"GeneratorFunction"),Z(f),Z(f,o,"Generator"),Z(f,n,function(){return this}),Z(f,"toString",function(){return"[object Generator]"}),(X=function(){return{w:i,m}})()}function Z(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Z=function(e,t,r,n){function i(t,r){Z(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},Z(e,t,r,n)}function ee(e,t,r,n,o,i,l){try{var a=e[i](l),s=a.value}catch(e){return void r(e)}a.done?t(s):Promise.resolve(s).then(n,o)}function te(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function l(e){ee(i,n,o,l,a,"next",e)}function a(e){ee(i,n,o,l,a,"throw",e)}l(void 0)})}}function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],s=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(u)throw o}}return a}}(e,t)||ne(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){if(e){if("string"==typeof e)return oe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?oe(e,t):void 0}}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const ie=function(){var e,t=re((0,i.useState)([]),2),r=t[0],n=t[1],l=re((0,i.useState)((null===(e=window.msfAdmin)||void 0===e?void 0:e.formId)||0),2),c=l[0],f=l[1],m=re((0,i.useState)([]),2),p=m[0],d=m[1],b=re((0,i.useState)(!1),2),y=b[0],h=b[1],v=re((0,i.useState)(null),2),j=v[0],x=v[1],_=re((0,i.useState)(null),2),g=_[0],O=_[1];(0,i.useEffect)(function(){w()},[]),(0,i.useEffect)(function(){c&&S()},[c]);var w=function(){var e=te(X().m(function e(){var t,r;return X().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,a()({path:"/wp/v2/msf_form?per_page=100"});case 1:t=e.v,n(t),t.length>0&&!c&&f(t[0].id),e.n=3;break;case 2:e.p=2,r=e.v,console.error("Error loading forms:",r);case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),S=function(){var e=te(X().m(function e(){var t,r;return X().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,h(!0),e.n=1,a()({path:"/msf/v1/forms/".concat(c,"/submissions")});case 1:t=e.v,d(t.submissions||[]),e.n=3;break;case 2:e.p=2,r=e.v,console.error("Error loading submissions:",r),O({type:"error",message:(0,o.__)("Failed to load submissions","multi-step-form-builder")});case 3:return e.p=3,h(!1),e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}));return function(){return e.apply(this,arguments)}}(),C=function(){var e=te(X().m(function e(t){var r;return X().w(function(e){for(;;)switch(e.p=e.n){case 0:if(confirm((0,o.__)("Are you sure you want to delete this submission?","multi-step-form-builder"))){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,a()({path:"/msf/v1/submissions/".concat(t),method:"DELETE"});case 2:O({type:"success",message:(0,o.__)("Submission deleted","multi-step-form-builder")}),S(),e.n=4;break;case 3:e.p=3,r=e.v,console.error("Error deleting submission:",r),O({type:"error",message:(0,o.__)("Failed to delete submission","multi-step-form-builder")});case 4:return e.a(2)}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}(),T=r.map(function(e){return{label:e.title.rendered,value:e.id}});return(0,u.jsxs)("div",{className:"msf-submissions-list",children:[g&&(0,u.jsx)(s.Notice,{status:g.type,onRemove:function(){return O(null)},isDismissible:!0,children:g.message}),(0,u.jsxs)("div",{className:"msf-submissions-header",children:[(0,u.jsx)(s.SelectControl,{label:(0,o.__)("Select Form","multi-step-form-builder"),value:c,options:[{label:(0,o.__)("Select a form...","multi-step-form-builder"),value:0}].concat(Q(T)),onChange:function(e){return f(parseInt(e))}}),(0,u.jsx)(s.Button,{variant:"secondary",onClick:function(){if(0!==p.length){var e=new Set;p.forEach(function(t){Object.keys(t.submission_data).forEach(function(t){return e.add(t)})});var t=["ID","Date","User ID","IP Address"].concat(Q(Array.from(e))).join(",")+"\n";p.forEach(function(r){var n=[r.id,r.created_at,r.user_id||"",r.ip_address||""].concat(Q(Array.from(e).map(function(e){var t=r.submission_data[e]||"";return'"'.concat(String(t).replace(/"/g,'""'),'"')})));t+=n.join(",")+"\n"});var r=new Blob([t],{type:"text/csv"}),n=window.URL.createObjectURL(r),i=document.createElement("a");i.href=n,i.download="form-".concat(c,"-submissions.csv"),i.click(),window.URL.revokeObjectURL(n)}else alert((0,o.__)("No submissions to export","multi-step-form-builder"))},disabled:0===p.length,children:(0,o.__)("Export to CSV","multi-step-form-builder")})]}),y?(0,u.jsx)("div",{className:"msf-loading",children:(0,u.jsx)(s.Spinner,{})}):p.length>0?(0,u.jsxs)("table",{className:"wp-list-table widefat fixed striped",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:(0,o.__)("ID","multi-step-form-builder")}),(0,u.jsx)("th",{children:(0,o.__)("Date","multi-step-form-builder")}),(0,u.jsx)("th",{children:(0,o.__)("User","multi-step-form-builder")}),(0,u.jsx)("th",{children:(0,o.__)("IP Address","multi-step-form-builder")}),(0,u.jsx)("th",{children:(0,o.__)("Actions","multi-step-form-builder")})]})}),(0,u.jsx)("tbody",{children:p.map(function(e){return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:e.id}),(0,u.jsx)("td",{children:new Date(e.created_at).toLocaleString()}),(0,u.jsx)("td",{children:e.user_id||(0,o.__)("Guest","multi-step-form-builder")}),(0,u.jsx)("td",{children:e.ip_address}),(0,u.jsxs)("td",{children:[(0,u.jsx)(s.Button,{variant:"secondary",isSmall:!0,onClick:function(){return x(e)},children:(0,o.__)("View","multi-step-form-builder")})," ",(0,u.jsx)(s.Button,{variant:"secondary",isSmall:!0,isDestructive:!0,onClick:function(){return C(e.id)},children:(0,o.__)("Delete","multi-step-form-builder")})]})]},e.id)})})]}):(0,u.jsx)("p",{children:(0,o.__)("No submissions yet.","multi-step-form-builder")}),j&&(0,u.jsx)(s.Modal,{title:(0,o.__)("Submission Details","multi-step-form-builder"),onRequestClose:function(){return x(null)},children:(0,u.jsxs)("div",{className:"msf-submission-details",children:[(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:(0,o.__)("Date:","multi-step-form-builder")})," ",new Date(j.created_at).toLocaleString()]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:(0,o.__)("User ID:","multi-step-form-builder")})," ",j.user_id||(0,o.__)("Guest","multi-step-form-builder")]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:(0,o.__)("IP Address:","multi-step-form-builder")})," ",j.ip_address]}),(0,u.jsx)("hr",{}),(0,u.jsx)("h3",{children:(0,o.__)("Form Data","multi-step-form-builder")}),(0,u.jsx)("table",{className:"widefat",children:(0,u.jsx)("tbody",{children:Object.entries(j.submission_data).map(function(e){var t=re(e,2),r=t[0],n=t[1];return(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:r}),(0,u.jsx)("td",{children:Array.isArray(n)?n.join(", "):n})]},r)})})})]})})]})};var le=document.getElementById("msf-form-builder-root");le&&(0,n.H)(le).render((0,u.jsx)(K,{}));var ae=document.getElementById("msf-submissions-root");ae&&(0,n.H)(ae).render((0,u.jsx)(ie,{}))})();