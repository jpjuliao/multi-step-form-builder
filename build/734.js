/*! For license information please see 734.js.LICENSE.txt */
"use strict";(self.webpackChunkmulti_step_form_builder=self.webpackChunkmulti_step_form_builder||[]).push([[734],{734(t,e,n){n.d(e,{default:()=>D});var r=n(594),o=n(470),i=n(214),u=n(842),a=n.n(u);function c(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof a?r:a,l=Object.create(c.prototype);return s(l,"_invoke",function(n,r,o){var i,a,c,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,a=0,c=t,p.n=n,u}};function d(n,r){for(a=n,c=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,i=l[e],d=p.p,m=i[2];n>3?(o=m===r)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(a=0,p.v=r,p.n=i[1]):d<m&&(o=n<3||i[0]>r||r>m)&&(i[4]=n,i[5]=r,p.n=m,a=0))}if(o||n>1)return u;throw f=!0,r}return function(o,l,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,m),a=l,c=m;(e=a<2?t:c)||!f;){i||(a?a<3?(a>1&&(p.n=-1),d(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(a||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,a<2&&(a=0)}else 1===a&&(e=i.return)&&e.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((e=(f=p.n<0)?c:n.call(r,p))!==u)break}catch(e){i=t,a=1,c=e}finally{s=1}}return{value:e,done:f}}}(n,o,i),!0),l}var u={};function a(){}function l(){}function f(){}e=Object.getPrototypeOf;var p=[][r]?e(e([][r]())):(s(e={},r,function(){return this}),e),d=f.prototype=a.prototype=Object.create(p);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=f,s(d,"constructor",f),s(f,"constructor",l),l.displayName="GeneratorFunction",s(f,o,"GeneratorFunction"),s(d),s(d,o,"Generator"),s(d,r,function(){return this}),s(d,"toString",function(){return"[object Generator]"}),(c=function(){return{w:i,m}})()}function s(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}s=function(t,e,n,r){function i(e,n){s(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},s(t,e,n,r)}function l(t,e,n,r,o,i,u){try{var a=t[i](u),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,o)}function f(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function u(t){l(i,r,o,u,a,"next",t)}function a(t){l(i,r,o,u,a,"throw",t)}u(void 0)})}}var p=function(){var t=f(c().m(function t(e){return c().w(function(t){for(;;)if(0===t.n)return t.a(2,a()({path:"/msf/v1/forms/".concat(e),method:"GET"}))},t)}));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=f(c().m(function t(e,n){return c().w(function(t){for(;;)if(0===t.n)return t.a(2,a()({path:"/msf/v1/forms/".concat(e),method:"POST",data:n}))},t)}));return function(e,n){return t.apply(this,arguments)}}(),m=function(){var t=f(c().m(function t(){return c().w(function(t){for(;;)if(0===t.n)return t.a(2,a()({path:"/msf/v1/forms",method:"GET"}))},t)}));return function(){return t.apply(this,arguments)}}(),v=function(){var t=f(c().m(function t(e){return c().w(function(t){for(;;)if(0===t.n)return t.a(2,a()({path:"/msf/v1/forms/".concat(e,"/submissions"),method:"GET"}))},t)}));return function(e){return t.apply(this,arguments)}}(),y={getForm:p,saveForm:d,listForms:m,listSubmissions:v},b=function(){var t,e,n=null===(t=window.wp)||void 0===t||null===(t=t.data)||void 0===t||null===(e=t.dispatch)||void 0===e?void 0:e.call(t,"core/editor");if(null!=n&&n.savePost)n.savePost();else{var r=document.getElementById("publish");if(r)r.click();else{var o=document.getElementById("post");o&&o.submit()}}};function h(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof a?r:a,s=Object.create(c.prototype);return g(s,"_invoke",function(n,r,o){var i,a,c,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,a=0,c=t,p.n=n,u}};function d(n,r){for(a=n,c=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,i=l[e],d=p.p,m=i[2];n>3?(o=m===r)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(a=0,p.v=r,p.n=i[1]):d<m&&(o=n<3||i[0]>r||r>m)&&(i[4]=n,i[5]=r,p.n=m,a=0))}if(o||n>1)return u;throw f=!0,r}return function(o,l,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,m),a=l,c=m;(e=a<2?t:c)||!f;){i||(a?a<3?(a>1&&(p.n=-1),d(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(a||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,a<2&&(a=0)}else 1===a&&(e=i.return)&&e.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((e=(f=p.n<0)?c:n.call(r,p))!==u)break}catch(e){i=t,a=1,c=e}finally{s=1}}return{value:e,done:f}}}(n,o,i),!0),s}var u={};function a(){}function c(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(g(e={},r,function(){return this}),e),f=s.prototype=a.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,g(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return c.prototype=s,g(f,"constructor",s),g(s,"constructor",c),c.displayName="GeneratorFunction",g(s,o,"GeneratorFunction"),g(f),g(f,o,"Generator"),g(f,r,function(){return this}),g(f,"toString",function(){return"[object Generator]"}),(h=function(){return{w:i,m:p}})()}function g(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}g=function(t,e,n,r){function i(e,n){g(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},g(t,e,n,r)}function j(t,e,n,r,o,i,u){try{var a=t[i](u),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,o)}function S(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function u(t){j(i,r,o,u,a,"next",t)}function a(t){j(i,r,o,u,a,"throw",t)}u(void 0)})}}function w(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){s=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(s)throw o}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return O(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function _(t,e){if(t){if("string"==typeof t)return x(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(t,e):void 0}}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function A(t){return function(t){if(Array.isArray(t))return E(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return E(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach(function(e){N(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function N(t,e,n){return(e=function(t){var e=function(t){if("object"!=P(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==P(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var F=function(t,e){return{addStep:function(){var n={id:"step_".concat(Date.now()),title:"",description:"",fields:[]};e(k(k({},t),{},{steps:[].concat(A((null==t?void 0:t.steps)||[]),[n])}))},updateStep:function(n,r){var o=A(t.steps);o[n]=r,e(k(k({},t),{},{steps:o}))},deleteStep:function(n){var r=t.steps.filter(function(t,e){return e!==n});e(k(k({},t),{},{steps:r}))},moveStep:function(n,r){var o=function(t,e,n){var r,o=function(t){if(Array.isArray(t))return x(t)}(r=t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||_(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){s=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(s)throw o}}return a}}(t,e)||_(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(o.splice(e,1),1)[0];return o.splice(n,0,i),o}(t.steps,n,r);e(k(k({},t),{},{steps:o}))},updateSettings:function(n){e(k(k({},t),{},{settings:n}))}}},I=n(848),C=(0,r.lazy)(function(){return n.e(980).then(n.bind(n,980))}),G=(0,r.lazy)(function(){return n.e(484).then(n.bind(n,484))}),B=(0,r.lazy)(function(){return n.e(280).then(n.bind(n,280))});const D=function(){var t,e=null===(t=window.msfAdmin)||void 0===t?void 0:t.formId,n=function(t){var e=w((0,r.useState)(null),2),n=e[0],i=e[1],u=w((0,r.useState)(!0),2),c=u[0],s=u[1],l=w((0,r.useState)(!1),2),f=l[0],p=l[1],d=w((0,r.useState)(null),2),m=d[0],v=d[1],g=(0,r.useRef)(!1),j=function(){var e=S(h().m(function e(){var n;return h().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,s(!0),e.n=1,y.getForm(t);case 1:n=e.v,i(n),e.n=3;break;case 2:e.p=2,e.v,v({type:"error",message:(0,o.__)("Failed to load form","multi-step-form-builder")});case 3:return e.p=3,s(!1),e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}));return function(){return e.apply(this,arguments)}}(),O=function(){var e=S(h().m(function e(){return h().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,p(!0),g.current=!0,e.n=1,y.saveForm(t,n);case 1:b(),v({type:"success",message:(0,o.__)("Form saved successfully!","multi-step-form-builder")}),setTimeout(function(){return v(null)},3e3),e.n=3;break;case 2:e.p=2,e.v,v({type:"error",message:(0,o.__)("Failed to save form","multi-step-form-builder")});case 3:return e.p=3,p(!1),g.current=!1,e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}));return function(){return e.apply(this,arguments)}}();return(0,r.useEffect)(function(){j()},[]),(0,r.useEffect)(function(){var e=function(t,e){var n,r,o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!1},u=null===(n=window.wp)||void 0===n||null===(n=n.data)||void 0===n||null===(r=n.select)||void 0===r?void 0:r.call(n,"core/editor"),c=null===(o=window.wp)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.subscribe,s=!1;if(c&&u){var l=c(function(){var n,r,o,u,c=null===(n=window.wp)||void 0===n||null===(n=n.data)||void 0===n||null===(r=n.select)||void 0===r?void 0:r.call(n,"core/editor"),l=null==c||null===(o=c.isSavingPost)||void 0===o?void 0:o.call(c),f=null==c||null===(u=c.isAutosavingPost)||void 0===u?void 0:u.call(c);if(l&&!f){if(!s&&(s=!0,!i())){var p=e();a()({path:"/msf/v1/forms/".concat(t),method:"POST",data:p}).catch(function(){})}}else s=!1});return"function"==typeof l?l:function(){}}var f=function(){var n=e();a()({path:"/msf/v1/forms/".concat(t),method:"POST",data:n}).catch(function(){})},p=document.getElementById("publish"),d=document.getElementById("save-post");return p&&p.addEventListener("click",f,{once:!1}),d&&d.addEventListener("click",f,{once:!1}),function(){p&&p.removeEventListener("click",f),d&&d.removeEventListener("click",f)}}(t,function(){return n},function(){return g.current});return function(){"function"==typeof e&&e()}},[t,n]),{formConfig:n,setFormConfig:i,loading:c,saving:f,notice:m,setNotice:v,saveForm:O}}(e),u=n.formConfig,c=n.setFormConfig,s=n.loading,l=n.saving,f=n.notice,p=n.setNotice,d=n.saveForm,m=F(u,c),v=m.addStep,g=m.updateStep,j=m.deleteStep,O=m.moveStep,_=m.updateSettings;if(s)return(0,I.jsxs)("div",{className:"msf-loading",children:[(0,I.jsx)(i.Spinner,{}),(0,I.jsx)("p",{children:(0,o.__)("Loading form...","multi-step-form-builder")})]});var x=[{name:"steps",title:(0,o.__)("Steps","multi-step-form-builder"),className:"msf-tab-steps"},{name:"header",title:(0,o.__)("Header","multi-step-form-builder"),className:"msf-tab-header"},{name:"settings",title:(0,o.__)("Settings","multi-step-form-builder"),className:"msf-tab-settings"}];return(0,I.jsxs)("div",{className:"msf-form-builder",children:[f&&(0,I.jsx)(i.Notice,{status:f.type,onRemove:function(){return p(null)},isDismissible:!0,children:f.message}),(0,I.jsx)("div",{className:"msf-builder-header",children:(0,I.jsx)(i.Button,{variant:"primary",onClick:d,isBusy:l,disabled:l,children:l?(0,o.__)("Saving...","multi-step-form-builder"):(0,o.__)("Save Form","multi-step-form-builder")})}),(0,I.jsx)(i.TabPanel,{className:"msf-tabs",activeClass:"is-active",tabs:x,children:function(t){return(0,I.jsx)(r.Suspense,{fallback:(0,I.jsx)("div",{className:"msf-loading-tab",children:(0,I.jsx)(i.Spinner,{})}),children:"header"===t.name?(0,I.jsx)("div",{className:"msf-header-panel",children:(0,I.jsx)(B,{formConfig:u,updateFormConfig:c})}):"steps"===t.name?(0,I.jsxs)("div",{className:"msf-steps-panel",children:[(null===(n=u.steps)||void 0===n?void 0:n.length)>0?u.steps.map(function(t,e){return(0,I.jsxs)("div",{className:"msf-step-wrapper",children:[(0,I.jsxs)("div",{className:"msf-step-controls",children:[(0,I.jsxs)("span",{className:"msf-step-number",children:[(0,o.__)("Step","multi-step-form-builder")," ",e+1]}),(0,I.jsxs)("div",{className:"msf-step-move-buttons",children:[e>0&&(0,I.jsx)(i.Button,{icon:"arrow-up",onClick:function(){return O(e,e-1)},label:(0,o.__)("Move Up","multi-step-form-builder"),isSmall:!0}),e<u.steps.length-1&&(0,I.jsx)(i.Button,{icon:"arrow-down",onClick:function(){return O(e,e+1)},label:(0,o.__)("Move Down","multi-step-form-builder"),isSmall:!0})]})]}),(0,I.jsx)(C,{step:t,stepIndex:e,onUpdate:function(t){return g(e,t)},onDelete:function(){return j(e)}})]},t.id||e)}):(0,I.jsx)("div",{className:"msf-empty-state",children:(0,I.jsx)("p",{children:(0,o.__)("No steps yet. Add your first step to get started.","multi-step-form-builder")})}),(0,I.jsx)(i.Button,{variant:"secondary",onClick:v,className:"msf-add-step-btn",children:(0,o.__)("Add Step","multi-step-form-builder")})]}):"settings"===t.name?(0,I.jsx)(G,{settings:u.settings||{},onUpdate:_,formId:e}):void 0});var n}})]})}}}]);